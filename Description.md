## Логическая структура игры «Шахматы»

Наша структура основана на 4 логических частях:

### Классы фигур

Класс Piece – абстрактный, от него наследуются классы соответствующих фигур (реализованы Pawn, Bishop, Knight, Rook, Queen, King, а также фиктивная фигура Empty).
Класс каждой фигуры отвечает за проверку корректности движения фигуры при текущей позиции, при этом нет проверки на корректность позиции после хода (например, после хода король попадает под удар вражеской фигуры).
Здесь мы используем порождающий паттерн Singleton, так как нам достаточно хранить всего один экземпляр каждой фигуры, но желательно иметь к нему доступ в разных частях кода. Также используется структурный паттерн Bridge для разделения фигур на белый и черный цвета.

### Класс Position

Класс Position хранит полную информацию о текущей игровой позиции, по которой можно однозначно восстановить ход дальнейшей игры, это удобно для возможности откатываться по позициям, сохранять их и продолжать игру позже. В ней мы храним информацию о текущей доске, цвет хода, информация о неподвижности короля и ладей (необходимо для проверки рокировки), последний ход (необходимо для проверки взятия на проходе). Также объект может определить тип позиции (шах, мат, ничья).

### Классы ходов 

Класс Move – абстрактный, от него наследуются классы соответствующих ходов (реализованы SimpleMove, Castle, Promotion, EnPassant и фиктивный ход InvalidMove).
Аналогично как и в ходах, используется Singleton.
Взаимодействие ходов и позиций основано на поведенческом паттерне Strategy. Каждый класс принимает на вход позицию, координаты хода и изменяет переданную позиции в соответствии с логикой хода.
Взаимодействие фигур и ходов основано на поведенческом паттерне Command. После проверки корректности движения фигура возвращает объект хода, соответствующий введенному.

### Класс Game

Центральный игровой класс, здесь реализован игровой цикл. Хранит текущую позицию и историю всех позиций до этого. Принимает на вход координаты хода, отправляет запрос в фигуру, которая возвращает тип хода. Делегирует изменение позиции в соответствующий класс хода. Проверяет корректность хода, корректность позиции после хода, возвращает ответ – совершен ход или нет, объявлен мат или позиция ничейная. Пока что здесь реализован вывод доски в консоль.

#### UML
UML-диаграмма классов представлена по ссылке:
https://lucid.app/lucidchart/eca961f7-6962-4ddd-a6f0-f67ca4cb4a73/edit?invitationId=inv_452b2e2c-af77-4c21-94c9-a641e994b551

#### Гибкость к изменениям

При такой структуре возможно легкое добавление новых фигур и соответствующих им ходов. Достаточно написать новый класс-наследник Piece,  где определить логику движения фигуры, и класс-наследник Move, где определить логику хода.
Также заложена почва для возможности сохранять игру и продолжать её  в любой момент, для свободного перехода по позициям. 


